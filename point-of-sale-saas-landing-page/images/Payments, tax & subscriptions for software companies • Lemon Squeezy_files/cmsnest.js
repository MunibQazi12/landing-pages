"use strict";(()=>{var mt=Object.defineProperty;var ut=(e,t,o)=>t in e?mt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;var q=(e,t,o)=>(ut(e,typeof t!="symbol"?t+"":t,o),o);var S="fs-attributes";var j="cmsattribute";var H="cmscore";var A="cmsnest";var O="support";var G=async(...e)=>{var o;let t=[];for(let n of e){let r=await((o=window.fsAttributes[n])==null?void 0:o.loading);t.push(r)}return t};var g=class{static activateAlerts(){this.alertsActivated=!0}static alert(t,o){if(this.alertsActivated&&window.alert(t),o==="error")throw new Error(t)}};q(g,"alertsActivated",!1);var $=()=>{};var z={wrapper:"w-dyn-list",list:"w-dyn-items",item:"w-dyn-item",paginationWrapper:"w-pagination-wrapper",paginationNext:"w-pagination-next",paginationPrevious:"w-pagination-previous",pageCount:"w-page-count",emptyState:"w-dyn-empty"};var U=e=>typeof e=="string";var v=(e,t=!0)=>e.cloneNode(t);function X(e,t,o){var r;let n=window.fsAttributes[e];return n.destroy=o||$,(r=n.resolve)==null||r.call(n,t),t}var B=(e,t="1",o="iife")=>{let r=`${e}${o==="esm"?".esm":""}.js`;return`https://cdn.jsdelivr.net/npm/@finsweet/attributes-${e}@${t}/${r}`};var Et=B(H,"1"),Y=async()=>{let{fsAttributes:e}=window;e.cmscore||(e.cmscore={});let{cmscore:t}=e;if(t.import)return t.import;try{return t.import=import(Et),t.import.then(o=>{o&&(t.version||(t.version=o.version))}),t.import}catch(o){g.alert(`${o}`,"error");return}};var Tt=`${S}-${O}`,Q=async()=>{var r;let{fsAttributes:e,location:t}=window,{host:o,searchParams:n}=new URL(t.href);return!o.includes("webflow.io")||!n.has(Tt)?!1:(r=e.import)==null?void 0:r.call(e,O,"1")};var M=e=>{let t=(r,s,i)=>{let c=e[r],{key:m,values:T}=c,p;if(!s)return`[${m}]`;let b=T==null?void 0:T[s];U(b)?p=b:p=b(i&&"instanceIndex"in i?i.instanceIndex:void 0);let u=i&&"caseInsensitive"in i&&i.caseInsensitive?"i":"";if(!(i!=null&&i.operator))return`[${m}="${p}"${u}]`;switch(i.operator){case"prefixed":return`[${m}^="${p}"${u}]`;case"suffixed":return`[${m}$="${p}"${u}]`;case"contains":return`[${m}*="${p}"${u}]`}};function o(r,s){let i=t("element",r,s),c=(s==null?void 0:s.scope)||document;return s!=null&&s.all?[...c.querySelectorAll(i)]:c.querySelector(i)}return[t,o,(r,s)=>{let i=e[s];return i?r.getAttribute(i.key):null}]};var C={preventLoad:{key:`${S}-preventload`},debugMode:{key:`${S}-debug`},src:{key:"src",values:{finsweet:"@finsweet/attributes"}},dev:{key:`${S}-dev`}},[k,te]=M(C);var J=e=>{let{currentScript:t}=document,o={};if(!t)return{attributes:o,preventsLoad:!1};let r={preventsLoad:U(t.getAttribute(C.preventLoad.key)),attributes:o};for(let s in e){let i=t.getAttribute(e[s]);r.attributes[s]=i}return r};var Z=({scriptAttributes:e,attributeKey:t,version:o,init:n})=>{var c;ft(),(c=window.fsAttributes)[t]||(c[t]={});let{preventsLoad:r,attributes:s}=J(e),i=window.fsAttributes[t];i.version=o,i.init=n,r||(window.Webflow||(window.Webflow=[]),window.Webflow.push(()=>n(s)))},ft=()=>{let e=St();if(window.fsAttributes&&!Array.isArray(window.fsAttributes)){D(window.fsAttributes,e);return}let t=dt(e);D(t,e),At(t),window.fsAttributes=t,window.FsAttributes=window.fsAttributes,Q()},dt=e=>{let t={cms:{},push(...o){var n,r;for(let[s,i]of o)(r=(n=this[s])==null?void 0:n.loading)==null||r.then(i)},async import(o,n){let r=t[o];return r||new Promise(s=>{let i=document.createElement("script");i.src=B(o,n),i.async=!0,i.onload=()=>{let[c]=D(t,[o]);s(c)},document.head.append(i)})},destroy(){var o,n;for(let r of e)(n=(o=window.fsAttributes[r])==null?void 0:o.destroy)==null||n.call(o)}};return t},St=()=>{let e=k("src","finsweet",{operator:"contains"}),t=k("dev");return[...document.querySelectorAll(`script${e}, script${t}`)].reduce((r,s)=>{var c;let i=s.getAttribute(C.dev.key)||((c=s.src.match(/[\w-. ]+(?=(\.js)$)/))==null?void 0:c[0]);return i&&!r.includes(i)&&r.push(i),r},[])},D=(e,t)=>t.map(n=>{let r=e[n];return r||(e[n]={},r=e[n],r.loading=new Promise(s=>{r.resolve=i=>{s(i),delete r.resolve}}),r)}),At=e=>{let t=Array.isArray(window.fsAttributes)?window.fsAttributes:[];e.push(...t)};var tt="1.9.0";var bt="fs-cms-element",yt={wrapper:"wrapper",list:"list",item:"item",paginationWrapper:"pagination-wrapper",paginationNext:"pagination-next",paginationPrevious:"pagination-previous",pageCount:"page-count",emptyState:"empty"},a=e=>{let t=`.${z[e]}`,o=`[${bt}="${yt[e]}"]`;return`:is(${t}, ${o})`},et=(e,t=document)=>{e=e.filter(s=>s);let o=e.join(", ")||a("wrapper");return[...t.querySelectorAll(o)].reduce((s,i)=>{if(!i)return s;let c=N(i,"wrapper");return!c||s.includes(c)||s.push(c),s},[])};function N(e,t,o=document){let n=typeof e=="string"?o.querySelector(e):e;if(!n)return;let r=n.closest(a("wrapper"));if(!r)return;let s=r.querySelector(a("list"));return t==="wrapper"?r:t==="list"?s:t==="items"?[...(s==null?void 0:s.querySelectorAll(`:scope > ${a("item")}`))||[]]:t==="pageCount"?r.querySelector(a("pageCount")):t==="empty"?r.querySelector(`:scope > ${a("emptyState")}`):t==="pagination"?r.querySelector(a("paginationWrapper")):r.querySelector(a(t==="next"?"paginationNext":"paginationPrevious"))}function x(e){return e==null?void 0:e.trim().toLowerCase()}var K=`fs-${A}`,Ct="list",xt="collection",wt="empty",w={element:{key:`${K}-element`,values:{list:Ct}},collection:{key:`${K}-${xt}`},empty:{key:`${K}-${wt}`}},[E,Ce]=M(w);var{collection:{key:ot},empty:{key:_t}}=w,rt=({createCMSListInstances:e})=>{let t=new Map,o=e([E("collection")]);for(let n of o){let r=x(n.getAttribute(ot));if(!r)continue;let s=document.querySelector(`[${_t}^="${r}"]`);s&&(s.style.display="none"),n.wrapper.style.display="none",t.set(r,{listInstance:n,emptyElement:s})}return t},nt=e=>{let t=new Map,o=e.querySelectorAll(`${E("collection")}:not(a)`);for(let n of o){let r=x(n.getAttribute(ot));!r||t.set(r,n)}return t};var It=new DOMParser,st=new Map,it=async e=>{try{let t=st.get(e);if(t)return t;let o=new Promise(async n=>{let s=await(await fetch(e)).text(),i=It.parseFromString(s,"text/html");n(i)});return st.set(e,o),o}catch(t){return null}};var _=async({element:e,href:t},o,n)=>{if(!t)return;let{CMSList:r,CMSItem:s}=n,i=nt(e);if(!i.size)return;let c=await it(t);if(!c)return;let m=et([E("collection")],c),T=new Set;await Promise.all(m.map(async(p,b)=>{let u=new r(p,b),y=x(u.getAttribute(w.collection.key));if(!y||T.has(y))return;T.add(y);let V=o.get(y),I=i.get(y);if(!V||!I)return;let F=I.parentElement;if(!F)return;let{listInstance:W,emptyElement:P}=V,h=u.items.reduce((l,{href:d})=>{if(!d)return l;let R=W.items.find(L=>L.href&&d===L.href);return R&&l.push(R),l},[]);if(!h.length&&!P)return;let f=v(W.wrapper),pt=N(f,"items");if(f.style.display="",h.length)for(let l of pt){if(!!!h.find(({element:L})=>L.isEqualNode(l))){l.remove();continue}let R=new s(l,f);await _(R,o,n)}else if(P){let l=N(f,"list");l==null||l.remove();let d=v(P);d.style.display="",f.appendChild(d)}F.insertBefore(f,I),I.remove()}))};var ct=(e,t,o)=>{e.on("shouldnest",async n=>{await Promise.all(n.map(r=>_(r,t,o)))})};var lt=async(e,t)=>{let o=rt(t);if(!o.size)return;ct(e,o,t);let n=[...e.items];await Promise.all(n.map(r=>_(r,o,t))),await e.emitSerial("nestinitialitems",n)};var at=async()=>{let e=await Y();if(!e)return[];await G(j);let t=e.createCMSListInstances([E("element","list",{operator:"prefixed"})]);return await Promise.all(t.map(o=>lt(o,e))),X(A,t,()=>{var o;for(let n of t)(o=n.destroy)==null||o.call(n)})};Z({init:at,version:tt,attributeKey:A});})();
