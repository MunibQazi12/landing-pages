"use strict";(()=>{var Se=Object.create;var mt=Object.defineProperty,ye=Object.defineProperties,be=Object.getOwnPropertyDescriptor,he=Object.getOwnPropertyDescriptors,Ae=Object.getOwnPropertyNames,xt=Object.getOwnPropertySymbols,Ce=Object.getPrototypeOf,_t=Object.prototype.hasOwnProperty,xe=Object.prototype.propertyIsEnumerable;var ct=(t,e,r)=>e in t?mt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,B=(t,e)=>{for(var r in e||(e={}))_t.call(e,r)&&ct(t,r,e[r]);if(xt)for(var r of xt(e))xe.call(e,r)&&ct(t,r,e[r]);return t},X=(t,e)=>ye(t,he(e));var _e=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Fe=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Ae(e))!_t.call(t,o)&&o!==r&&mt(t,o,{get:()=>e[o],enumerable:!(n=be(e,o))||n.enumerable});return t};var we=(t,e,r)=>(r=t!=null?Se(Ce(t)):{},Fe(e||!t||!t.__esModule?mt(r,"default",{value:t,enumerable:!0}):r,t));var Ft=(t,e,r)=>(ct(t,typeof e!="symbol"?e+"":e,r),r);var oe=_e((Nn,re)=>{re.exports=yr;function yr(t,e,r,n){var o,s,i;return function(){if(i=this,s=Array.prototype.slice.call(arguments),o&&(r||n))return;if(!r)return m(),o=setTimeout(a,e),o;o=setTimeout(m,e),t.apply(i,s);function a(){m(),t.apply(i,s)}function m(){clearTimeout(o),o=null}}}});var O="fs-attributes";var wt="animation";var It="cmsattribute";var Lt="cmscore";var P="cmsfilter";var Mt="queryparam";var ut="support";var vt=async(...t)=>{var r;let e=[];for(let n of t){let o=await((r=window.fsAttributes[n])==null?void 0:r.loading);e.push(o)}return e};var w=class{static activateAlerts(){this.alertsActivated=!0}static alert(e,r){if(this.alertsActivated&&window.alert(e),r==="error")throw new Error(e)}};Ft(w,"alertsActivated",!1);var G=()=>{};function I(t,e,r,n){return t?(t.addEventListener(e,r,n),()=>t.removeEventListener(e,r,n)):G}var Rt={wrapper:"w-dyn-list",list:"w-dyn-items",item:"w-dyn-item",paginationWrapper:"w-pagination-wrapper",paginationNext:"w-pagination-next",paginationPrevious:"w-pagination-previous",pageCount:"w-page-count",emptyState:"w-dyn-empty"},R={formBlock:"w-form",checkboxField:"w-checkbox",checkboxInput:"w-checkbox-input",radioField:"w-radio",radioInput:"w-radio-input",checkboxOrRadioLabel:"w-form-label",checkboxOrRadioFocus:"w--redirected-focus",checkboxOrRadioChecked:"w--redirected-checked",successMessage:"w-form-done",errorMessage:"w-form-fail"};var $=(t,e)=>(Array.isArray(e)||(e=[e]),e.map(n=>t.dispatchEvent(new Event(n,{bubbles:!0}))).every(n=>n));var Dt=t=>t instanceof Element;var D=t=>t instanceof HTMLInputElement,kt=t=>t instanceof HTMLSelectElement,Ut=t=>t instanceof HTMLTextAreaElement;var Y=t=>D(t)||kt(t)||Ut(t);var L=(t,e)=>!!t&&e.includes(t);var pt=t=>t!=null;var J=t=>typeof t=="string",Bt=t=>typeof t=="number";var q=t=>t===void 0;var{radioInput:Ie,checkboxOrRadioFocus:Le,checkboxOrRadioChecked:Me}=R,ft=(t,e=[])=>{let{type:r}=t;if(D(t)&&["checkbox","radio"].includes(r)){if(!t.checked||(t.checked=!1,$(t,["click","input","change"].filter(s=>!e.includes(s))),r==="checkbox"))return;let{parentElement:n}=t;if(!n)return;let o=n.querySelector(`.${Ie}`);if(!o)return;o.classList.remove(Le,Me);return}t.value="",$(t,["input","change"].filter(n=>!e.includes(n)))};var dt=(t,e=!0)=>t.cloneNode(e);function H(t,e,r,n=!0){let o=r?[r]:[];if(!t)return o;let s=t.split(",").reduce((i,l)=>{let a=l.trim();return(!n||a)&&i.push(a),i},[]);if(e){let i=s.filter(l=>L(l,e));return i.length?i:o}return s}var Et=t=>Object.entries(t);var Z=t=>!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length);var j=(t,e)=>t.every(r=>e.includes(r))&&e.every(r=>t.includes(r));var k=(t,e)=>{let{type:r}=t,n=r==="radio";if(n||r==="checkbox"){if(!D(t)||typeof e!="boolean"||e===t.checked||n&&e===!1)return;t.checked=e}else{if(t.value===e)return;t.value=e.toString()}$(t,["click","input","change"])};function Nt(t,e,r){var o;let n=window.fsAttributes[t];return n.destroy=r||G,(o=n.resolve)==null||o.call(n,e),e}var V=(t,e="1",r="iife")=>{let o=`${t}${r==="esm"?".esm":""}.js`;return`https://cdn.jsdelivr.net/npm/@finsweet/attributes-${t}@${e}/${o}`};var ve=V(wt,"1","esm"),tt=async()=>{let{fsAttributes:t}=window;t.animation||(t.animation={});let{animation:e}=t;if(e.import)return e.import;try{return e.import=import(ve),e.import}catch(r){w.alert(`${r}`,"error");return}};var Re=V(Lt,"1"),Kt=async()=>{let{fsAttributes:t}=window;t.cmscore||(t.cmscore={});let{cmscore:e}=t;if(e.import)return e.import;try{return e.import=import(Re),e.import.then(r=>{r&&(e.version||(e.version=r.version))}),e.import}catch(r){w.alert(`${r}`,"error");return}};var De=`${O}-${ut}`,Ot=async()=>{var o;let{fsAttributes:t,location:e}=window,{host:r,searchParams:n}=new URL(e.href);return!r.includes("webflow.io")||!n.has(De)?!1:(o=t.import)==null?void 0:o.call(t,ut,"1")};var _=t=>e=>`${t}${e?`-${e}`:""}`,et=t=>{let e=(o,s,i)=>{let l=t[o],{key:a,values:m}=l,c;if(!s)return`[${a}]`;let u=m==null?void 0:m[s];J(u)?c=u:c=u(i&&"instanceIndex"in i?i.instanceIndex:void 0);let p=i&&"caseInsensitive"in i&&i.caseInsensitive?"i":"";if(!(i!=null&&i.operator))return`[${a}="${c}"${p}]`;switch(i.operator){case"prefixed":return`[${a}^="${c}"${p}]`;case"suffixed":return`[${a}$="${c}"${p}]`;case"contains":return`[${a}*="${c}"${p}]`}};function r(o,s){let i=e("element",o,s),l=(s==null?void 0:s.scope)||document;return s!=null&&s.all?[...l.querySelectorAll(i)]:l.querySelector(i)}return[e,r,(o,s)=>{let i=t[s];return i?o.getAttribute(i.key):null}]};var W={preventLoad:{key:`${O}-preventload`},debugMode:{key:`${O}-debug`},src:{key:"src",values:{finsweet:"@finsweet/attributes"}},dev:{key:`${O}-dev`}},[Tt,Tn]=et(W);var Pt=t=>{let{currentScript:e}=document,r={};if(!e)return{attributes:r,preventsLoad:!1};let o={preventsLoad:J(e.getAttribute(W.preventLoad.key)),attributes:r};for(let s in t){let i=e.getAttribute(t[s]);o.attributes[s]=i}return o};var $t=({scriptAttributes:t,attributeKey:e,version:r,init:n})=>{var l;ke(),(l=window.fsAttributes)[e]||(l[e]={});let{preventsLoad:o,attributes:s}=Pt(t),i=window.fsAttributes[e];i.version=r,i.init=n,o||(window.Webflow||(window.Webflow=[]),window.Webflow.push(()=>n(s)))},ke=()=>{let t=Be();if(window.fsAttributes&&!Array.isArray(window.fsAttributes)){gt(window.fsAttributes,t);return}let e=Ue(t);gt(e,t),Ne(e),window.fsAttributes=e,window.FsAttributes=window.fsAttributes,Ot()},Ue=t=>{let e={cms:{},push(...r){var n,o;for(let[s,i]of r)(o=(n=this[s])==null?void 0:n.loading)==null||o.then(i)},async import(r,n){let o=e[r];return o||new Promise(s=>{let i=document.createElement("script");i.src=V(r,n),i.async=!0,i.onload=()=>{let[l]=gt(e,[r]);s(l)},document.head.append(i)})},destroy(){var r,n;for(let o of t)(n=(r=window.fsAttributes[o])==null?void 0:r.destroy)==null||n.call(r)}};return e},Be=()=>{let t=Tt("src","finsweet",{operator:"contains"}),e=Tt("dev");return[...document.querySelectorAll(`script${t}, script${e}`)].reduce((o,s)=>{var l;let i=s.getAttribute(W.dev.key)||((l=s.src.match(/[\w-. ]+(?=(\.js)$)/))==null?void 0:l[0]);return i&&!o.includes(i)&&o.push(i),o},[])},gt=(t,e)=>e.map(n=>{let o=t[n];return o||(t[n]={},o=t[n],o.loading=new Promise(s=>{o.resolve=i=>{s(i),delete o.resolve}}),o)}),Ne=t=>{let e=Array.isArray(window.fsAttributes)?window.fsAttributes:[];t.push(...e)};var Ht="1.16.0";var y=`fs-${P}`,Oe="list",Pe="filters",$e="empty",He="initial",Ve="results-count",Ge="filter-results-count",Ye="items-count",qe="tag-template",je="tag-text",We="tag-remove",ze="scroll-anchor",Qe="reset",Xe="field",Je="reset",Ze="match",Vt={any:"any",all:"all"},tr="range",Gt={from:"from",to:"to"},er="type",rr={date:"date"},or="showquery",nr={true:"true"},sr="allowsubmit",ir={true:"true"},lr="hideempty",ar={true:"true"},cr="highlight",mr={true:"true"},ur="highlightclass",pr="active",fr="debounce",dr="tagformat",Er={category:"category"},Tr="tagcategory",gr="easing",Sr="duration",F={element:{key:`${y}-element`,values:{list:_(Oe),filters:_(Pe),empty:_($e),initial:_(He),resultsCount:_(Ve),filterResultsCount:_(Ge),itemsCount:_(Ye),tagTemplate:_(qe),tagText:_(je),tagRemove:_(We),scrollAnchor:_(ze),reset:Qe}},field:{key:`${y}-${Xe}`},reset:{key:`${y}-${Je}`},match:{key:`${y}-${Ze}`,values:Vt},range:{key:`${y}-${tr}`,values:Gt},type:{key:`${y}-${er}`,values:rr},showQuery:{key:`${y}-${or}`,values:nr},allowSubmit:{key:`${y}-${sr}`,values:ir},hideEmpty:{key:`${y}-${lr}`,values:ar},highlight:{key:`${y}-${cr}`,values:mr},highlightCSS:{key:`${y}-${ur}`},activeCSS:{key:`${y}-${pr}`},debouncing:{key:`${y}-${fr}`},tagFormat:{key:`${y}-${dr}`},tagCategory:{key:`${y}-${Tr}`},easing:{key:`${y}-${gr}`},duration:{key:`${y}-${Sr}`}},[U,h]=et(F),Yt=Object.values(Vt),qt={range:Object.values(Gt)},rt=Object.values(Er),jt="fs-cmsfilter_highlight",Wt="fs-cmsfilter_active",zt="50";var ot=({filtersData:t})=>{for(let{elements:e}of t)for(let r of e){let{resultsCount:n,hidden:o,hideEmpty:s}=r;if(!s)continue;let i=n===0;i!==o&&(r.hidden=i,s.style.display=i?"none":"")}};var Qt=({props:t})=>{for(let e in t){let{elements:r,values:n,highlightData:o}=t[e];if(!!o)for(let s of n){let i=r.get(s);if(!i)continue;let{element:l,originalHTML:a}=i,m=o.get(s);if(!m){l.innerHTML=a;continue}let{filterValue:c,highlightCSSClass:u}=m,p=new RegExp(c||s,"gi");l.innerHTML=a.replace(p,`<span class="${u}">$&</span>`)}}},Xt=({props:t})=>{for(let e in t)t[e].highlightData=new Map};var nt=({resultsElement:t},{validItems:e})=>{!t||(t.textContent=`${e.length}`)},st=({filtersData:t})=>{for(let{elements:e}of t)for(let{resultsElement:r,resultsCount:n}of e)!r||(r.textContent=`${n}`)},it=({filtersData:t},{validItems:e})=>{var n,o;let r={};for(let{elements:s,filterKeys:i}of t){if(i.length>1)continue;let[l]=i;r[l]||(r[l]={});for(let a of s)a.resultsCount=0,(n=r[l])[o=a.value]||(n[o]=[]),r[l][a.value].push(a)}for(let{props:s}of e)for(let i in s){let l=r[i];if(!l)continue;let{values:a}=s[i];for(let m of a){let c=l[m];if(!!c)for(let u of c)u.resultsCount+=1}}};var{field:{key:Jt},range:{key:Zt},type:{key:te}}=F,ee=(t,e)=>{let{highlightResults:r,showFilterResults:n,hideEmptyFilters:o}=t;e.on("shouldcollectprops",s=>{for(let i of s)i.collectProps({fieldKey:Jt,rangeKey:Zt,typeKey:te})}),e.on("shouldfilter",async()=>await t.applyFilters(!0)),e.on("renderitems",s=>{if(nt(t,e),it(t,e),o&&ot(t),n&&st(t),r)for(let i of s)Qt(i)}),e.once("nestinitialitems").then(async s=>{for(let i of s)i.collectProps({fieldKey:Jt,rangeKey:Zt,typeKey:te});await t.applyFilters(!0),await e.renderItems(!0)})};var ht=we(oe(),1);var St=({elements:t,values:e},r)=>{let n;r?(e.delete(r),n=t.filter(o=>o.value===r)):(e.clear(),n=t);for(let{element:o}of n)ft(o)};var br="fs-cms-element",hr={wrapper:"wrapper",list:"list",item:"item",paginationWrapper:"pagination-wrapper",paginationNext:"pagination-next",paginationPrevious:"pagination-previous",pageCount:"page-count",emptyState:"empty"},ne=t=>{let e=`.${Rt[t]}`,r=`[${br}="${hr[t]}"]`;return`:is(${e}, ${r})`};var Ar=Intl.DateTimeFormat(),yt=t=>{if(!!t)return new Date(Ar.format(new Date(t)))};var se=t=>{if(!!t)return parseFloat(t.replace(/[^0-9.-]+/g,""))};function z(t){return t==null?void 0:t.trim().toLowerCase()}var bt=(t,e)=>{!t.closest(ne("item"))||(t.id=`${t.id}-${e}`)};var M=(t,e,r)=>{var u,p;let{value:n}=t,{elements:o,values:s,mode:i}=e,{value:l,mode:a,type:m,activeCSSClass:c}=r;switch(m){case"checkbox":{let{checked:E}=t;if(!l)break;(u=t.parentElement)==null||u.classList[E?"add":"remove"](c),s[E?"add":"delete"](l);break}case"radio":{let{checked:E}=t;for(let{element:f,type:T}of o){if(T!=="radio")return!1;let d=f.checked;(p=f.parentElement)==null||p.classList[d?"add":"remove"](c)}if(!E||!l)break;s.clear(),s.add(l);break}default:{if(r.value=n,t.classList[n?"add":"remove"](c),i==="range"){let E=[...s];E[a==="from"?0:1]=n,E.some(f=>!!f)?e.values=new Set(E):s.clear();break}s.clear(),n&&s.add(n);break}}return!0};var{field:{key:Cr},reset:{key:xr},range:{key:_r},match:{key:Fr},tagFormat:{key:wr},tagCategory:{key:Ir},hideEmpty:{key:Lr,values:Mr},highlight:{key:vr,values:Rr},highlightCSS:{key:Dr},activeCSS:{key:kr},debouncing:{key:Ur}}=F,{checkboxField:Br,radioField:Nr}=R,ie=t=>{let e=t.querySelector("form"),r=t.querySelector('input[type="submit"]'),n=t.querySelectorAll(U("element","reset",{operator:"prefixed"})),o=new Map;for(let s of n){let i=s.getAttribute(xr),l=i?[...new Set(H(i))].map(a=>z(a)):[];o.set(s,l)}return{form:e,submitButton:r,resetButtonsData:o}},le=(t,e,r,n,o)=>{let s=[];return t.querySelectorAll(U("field")).forEach((l,a)=>{let m=l.getAttribute(Cr);if(!m)return;let c=[...new Set(H(m))],u=c.map(S=>z(S));if(!u.length)return;let p=Kr(l,c,u,e,r,n,o);if(!p)return;let[E,f]=p,T=s.find(S=>j(u,S.filterKeys)),d=T||X(B({},E),{elements:[]});T||s.push(d);let g=l.closest(`.${Br}, .${Nr}`);if(g){let S=D(l),b=S?"true":l.textContent||"",x=S?l:g.querySelector("input");bt(x,a);let Q=h("filterResultsCount",{operator:"prefixed",scope:g}),K=l.getAttribute(Lr)===Mr.true?g:void 0,Ct=X(B({},f),{value:b,resultsElement:Q,hideEmpty:K,element:x,type:x.type});d.elements.push(Ct),M(x,d,Ct);return}if(!Y(l)||l.type==="submit")return;let{type:A,value:C}=l;bt(l,a);let v=X(B({},f),{element:l,type:A,value:C});d.elements.push(v),A==="select-one"&&M(l,d,v)}),s},Kr=(t,e,r,n,o,s,i)=>{let[l,a,m,c,u,p]=[Fr,wr,kr,Ur,vr,Dr].map(N=>t.getAttribute(N)),E=L(l,Yt)?l:void 0,f=L(a,rt)?a:void 0,T=t.getAttribute(Ir),d=m||n,g=c?parseFloat(c):o,A=s||u===Rr.true,C=p||i,v=t.getAttribute(_r),S,b;for(let[N,K]of Et(qt))if(L(v,K)){S=N,b=v;break}return[{match:E,filterKeys:r,originalFilterKeys:e,highlight:A,tagFormat:f,tagCategory:T,highlightCSSClass:C,mode:S,values:new Set},{activeCSSClass:d,debouncing:g,resultsCount:0,mode:b,hidden:!1}]};var ce=(t,e,r,n)=>(n&&Xt(t),r?!0:e.every(o=>Or(t,o))),Or=(t,{filterKeys:e,values:r,match:n,mode:o,highlight:s,highlightCSSClass:i,elements:l})=>{if(Bt(t.staticIndex))return!0;let a=[...r];if(!a.length)return!0;let m=e.includes("*");m&&(e=Object.keys(t.props));let c=e.filter(u=>{let p=t.props[u];if(!p)return!1;let{values:E,highlightData:f,type:T,range:d}=p,g=[...E];if(!g.length)return!1;if(o==="range"){let[C]=g,[v,S]=a,b=ae(C,v,S,T);return b&&s&&(f==null||f.set(C,{highlightCSSClass:i})),b}let A=a.filter(C=>{if(d==="from"||d==="to"){let[S,b]=g,x=ae(C,S,b,T);return x&&s&&(f==null||f.set(S,{highlightCSSClass:i}),f==null||f.set(b,{highlightCSSClass:i})),x}return g.some(S=>{let b;if(T==="date"&&!m){let[x,Q]=[C,S].map(N=>{var K;return(K=yt(N))==null?void 0:K.getTime()});b=x===Q}else l.some(({type:x})=>!["checkbox","radio","select-one"].includes(x))||e.length>1?b=S.toLowerCase().includes(C.toLowerCase()):b=C.toLowerCase()===S.toLowerCase();return b&&s&&(f==null||f.set(S,{highlightCSSClass:i,filterValue:C})),b})});return n==="all"?A.length===a.length:A.length>0});return n==="all"?c.length===e.length:c.length>0},ae=(t,e,r,n)=>{let[o,s,i]=[t,e,r].map(l=>n==="date"?yt(l):se(l));return o?!e&&!q(i)?o<=i:!r&&!q(s)?o>=s:q(i)||q(s)?!1:o>=s&&o<=i:!1};var{location:me,history:Pr}=window,ue=t=>{let e=!1,{filtersData:r}=t,n=new URL(me.href),{searchParams:o}=n;for(let s of o){let i=z(s[0]),l=s[1],a=r.find(({filterKeys:p})=>p.length===1&&p.includes(i));if(!a)continue;let m=H(l,void 0,void 0,!1);if(!m.length)continue;e=!0;let{elements:c,mode:u}=a;if(u==="range"){let[p,E]=m,f=c.filter(({mode:d})=>d==="from"),T=c.filter(({mode:d})=>d==="to");if(p&&f.length)for(let d of f){let{element:g,type:A}=d;A==="checkbox"||A==="radio"?k(g,!0):k(g,p),M(g,a,d)}if(E&&T)for(let d of T){let{element:g,type:A}=d;A==="checkbox"||A==="radio"?k(g,!0):k(g,E),M(g,a,d)}continue}for(let p of m)for(let E of c){let{element:f,value:T,type:d}=E;if(T===p&&(d==="checkbox"||d==="radio"))k(f,!0);else if(!T&&d!=="checkbox"&&d!=="radio")k(f,p);else continue;M(f,a,E)}}return e},pe=t=>{let e=new URL(me.href),{searchParams:r}=e;for(let{filterKeys:[n],values:o}of t){if(!o.size){r.delete(n);continue}let s=[...o].join(",");r.set(n,s)}Pr.replaceState(null,"",e.toString())};var{field:{key:$r},range:{key:Hr},type:{key:Vr}}=F,lt=class{constructor(e,r,{resultsElement:n,showQueryParams:o,allowSubmit:s,highlightAll:i,highlightCSSClass:l,activeCSSClass:a,debouncing:m}){this.formBlock=e;this.listInstance=r;this.restartingFilters=!1;let{form:c,submitButton:u,resetButtonsData:p}=ie(e);this.form=c,this.submitButton=u,this.resetButtonsData=p,this.resultsElement=n,this.showQueryParams=o,this.allowSubmit=s,this.activeCSSClass=a,this.debouncing=m,this.highlightAll=i,this.highlightCSSClass=l,this.submitButtonVisible=!!u&&Z(u);let E=this.init();this.destroy=async()=>{(await E)()}}async init(){let{listInstance:e,hideEmptyFilters:r,showFilterResults:n}=this;this.storeFiltersData();for(let o of e.items)o.collectProps({fieldKey:$r,rangeKey:Hr,typeKey:Vr});return nt(this,e),it(this,e),r&&ot(this),n&&st(this),ue(this),await tt(),this.applyFilters(),this.listenEvents()}async listenEvents(){let{form:e,resetButtonsData:r,submitButton:n}=this,o=I(e,"submit",a=>this.handleSubmit(a)),s=I(e,"input",a=>this.handleInputEvents(a)),i=[];for(let[a,m]of r){let c=I(a,"click",()=>this.resetFilters(m));i.push(c);let u=a.closest(`.${R.radioField}`);if(!u)continue;let p=u.querySelector("input");if(!p)continue;let E=I(p,"input",()=>{p.checked&&this.resetFilters(m)});i.push(E)}let l;return n&&(l=I(window,"resize",(0,ht.default)(()=>{this.submitButtonVisible=Z(n)},50))),()=>{o(),s(),l==null||l();for(let a of i)a()}}async handleInputEvents({target:e}){let{submitButtonVisible:r,filtersData:n,restartingFilters:o}=this;if(!Y(e))return;let s,i=n.find(({elements:m})=>(s=m.find(c=>c.element===e),s));if(!i||!s||!M(e,i,s)||o||r)return;let{debouncing:a}=s;this.debouncedApplyFilters||(this.debouncedApplyFilters=(0,ht.default)(this.applyFilters,a)),await this.debouncedApplyFilters()}async handleSubmit(e){this.allowSubmit||(e.preventDefault(),e.stopImmediatePropagation()),await this.applyFilters()}async toggleFiltersState(e){let{listInstance:r,filtersActive:n}=this,o=!e;n!==o&&(this.filtersActive=o,r.initialElement&&(await r.displayElement(o?"initialElement":"wrapper",!1,!1),await r.displayElement(o?"wrapper":"initialElement",!0,n!==void 0)))}async applyFilters(e,r=!0){this.debouncedApplyFilters=void 0;let{listInstance:n,filtersData:o,filtersActive:s,highlightResults:i,tagsInstance:l,showQueryParams:a}=this,{items:m,initialElement:c}=n,u=o.every(({values:p})=>!p.size);if(u&&!s){await this.toggleFiltersState(u);return}for(let p of m)p.valid=ce(p,o,u,i);e||(await n.switchPage(1,!1),n.scrollToAnchor(),a&&pe(o),await Promise.all([(async()=>{u?(await this.toggleFiltersState(u),await n.renderItems(!1,!c)):(await n.renderItems(!1,!c),await this.toggleFiltersState(u))})(),(async()=>{r&&await(l==null?void 0:l.syncTags())})()]))}async resetFilters(e,r){this.restartingFilters=!0;let{filtersData:n}=this;if(!e||!e.length)for(let s of n)St(s);else{let s=n.find(i=>j(i.filterKeys,e));if(!s)return;St(s,r)}let o=!r;await this.applyFilters(!1,o),this.restartingFilters=!1}async addTagsInstance(e){this.tagsInstance=e,await e.syncTags()}storeFiltersData(){let{form:e,activeCSSClass:r,debouncing:n,highlightAll:o,highlightCSSClass:s}=this,i=le(e,r,n,o,s);return this.filtersData=i,this.showFilterResults=i.some(({elements:l})=>l.some(({resultsElement:a})=>a)),this.hideEmptyFilters=i.some(({elements:l})=>l.some(({hideEmpty:a})=>a)),this.highlightResults=i.some(({highlight:l})=>l),i}};var At=({values:t,textNode:e,filterData:{originalFilterKeys:r,mode:n,tagFormat:o,tagCategory:s}},i)=>{let l=s||r.join(", "),a;n==="range"?a=`[${t.map(c=>c||"--").join(", ")}]`:[a]=t;let m;a==="true"?m=l:(o||i)==="category"?m=`${l}: ${a}`:m=a,e.textContent=m},fe=t=>!!h("tagRemove",{operator:"prefixed",scope:t});var at=class{constructor(e,r,n,o){this.template=e;this.filtersInstance=r;this.listInstance=n;this.globalTagsFormat=o;this.tagsData=[];this.hasRemoveTrigger=!1;this.wrapper=e.parentElement||w.alert("The tags have no parent wrapper.","error"),this.destroy=this.init()}init(){let{template:e,wrapper:r}=this;e.remove(),this.hasRemoveTrigger=fe(e);let n=I(r,"click",o=>this.handleClick(o));return()=>n()}handleClick(e){let{target:r}=e;if(!Dt(r))return;let{hasRemoveTrigger:n,tagsData:o,listInstance:s}=this,i=r.closest(U("element","tagTemplate",{instanceIndex:s.getInstanceIndex(F.element.key)}));if(!i)return;let l=r.closest(U("element","tagRemove",{operator:"prefixed"}));if(n&&!l)return;let a=o.find(({element:m})=>m===i);a&&this.removeTag(a,!0)}async addTag(e,r){let{wrapper:n,template:o,tagsData:s,globalTagsFormat:i,listInstance:{listAnimation:l}}=this,a=dt(o),m=h("tagText",{operator:"prefixed",scope:a})||a,c={element:a,values:r,textNode:m,filterData:e};if(At(c,i),s.push(c),l){let{animateIn:u,options:p}=l;await u(a,B({target:n},p))}else a.style.opacity="1",n.appendChild(a)}async updateTag(e,r){let{globalTagsFormat:n}=this;e.values=r,At(e,n)}async removeTag(e,r){let{element:n,values:o,filterData:{filterKeys:s}}=e,{tagsData:i,filtersInstance:l,listInstance:{listAnimation:a}}=this;this.tagsData=i.filter(m=>m!==e),await Promise.all([Promise.all(o.map(async m=>{if(r)return l.resetFilters(s,m)})),(async()=>{if(a){let{animateOut:m,options:c}=a;await m(n,B({remove:!0},c))}else n.remove()})()])}async syncTags(){let{tagsData:e,filtersInstance:{filtersData:r}}=this;await Promise.all(r.map(n=>{let{values:o,mode:s}=n,i=[...o],l=e.filter(c=>c.filterData===n);if(l.length===1&&(i.length===1||s==="range"&&i.length)){let[c]=l;this.updateTag(c,i);return}let a=[...i].filter(c=>!l.some(({values:u})=>u.includes(c))),m=l.filter(({values:c})=>c.every(u=>!i.includes(u)));return Promise.all([(async()=>s==="range"&&a.length?this.addTag(n,a):Promise.all(a.map(c=>this.addTag(n,[c]))))(),Promise.all(m.map(c=>this.removeTag(c)))])}))}};var{element:{key:de},duration:{key:Gr},easing:{key:Yr},showQuery:{key:qr,values:jr},allowSubmit:{key:Wr,values:zr},tagFormat:{key:Qr},highlight:{key:Xr,values:Jr},highlightCSS:{key:Zr},activeCSS:{key:to},debouncing:{key:eo}}=F,Ee=(t,e)=>{let r=t.getInstanceIndex(de),n=h("filters",{instanceIndex:r});if(!n)return;let o=n.closest(`.${R.formBlock}`);if(!o)return;let s=h("empty",{instanceIndex:r});s&&t.addEmptyElement(s);let i=h("initial",{instanceIndex:r});if(i&&(t.initialElement=i),!t.scrollAnchor){let T=h("scrollAnchor",{instanceIndex:r});T&&(t.scrollAnchor=T)}if(!t.itemsCount){let T=h("itemsCount",{instanceIndex:r});T&&t.addItemsCount(T)}let l=h("resultsCount",{instanceIndex:r}),a=t.getAttribute(qr)===jr.true,m=t.getAttribute(Wr)===zr.true,c=t.getAttribute(Xr)===Jr.true,u=t.getAttribute(Zr)||jt,p=t.getAttribute(to)||Wt,E=parseFloat(t.getAttribute(eo)||zt),f=new lt(o,t,{resultsElement:l,showQueryParams:a,allowSubmit:m,highlightAll:c,highlightCSSClass:u,activeCSSClass:p,debouncing:E});return e.addListAnimation(t,{durationKey:Gr,easingKey:Yr}),f},Te=async(t,e)=>{let r=t.getInstanceIndex(de),n=h("tagTemplate",{instanceIndex:r});if(!n)return;let o=t.getAttribute(Qr),s=L(o,rt)?o:void 0,i=new at(n,e,t,s);return await e.addTagsInstance(i),i};var ge=async()=>{let t=await Kt();if(!t)return[];await vt(It,Mt);let e=t.createCMSListInstances([U("element","list",{operator:"prefixed"})]),r=(await Promise.all(e.map(o=>ro(o,t)))).filter(pt),n=r.map(({filtersInstance:o})=>o);return Nt(P,n,()=>{var o;for(let s of e)(o=s.destroy)==null||o.call(s);for(let{cleanup:s}of r)s()})},ro=async(t,e)=>{let r=Ee(t,e);if(!r)return;ee(r,t);let n=await Te(t,r);return{filtersInstance:r,cleanup:()=>{r.destroy(),n==null||n.destroy()}}};$t({init:ge,version:Ht,attributeKey:P});tt();})();
